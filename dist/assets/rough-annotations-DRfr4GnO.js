const P="http://www.w3.org/2000/svg";class F{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function M(e,t,n,o,s){return{type:"path",ops:q(e,t,n,o,s)}}function A(e,t,n){const o=(e||[]).length;if(o>2){const s=[];for(let h=0;h<o-1;h++)s.push(...q(e[h][0],e[h][1],e[h+1][0],e[h+1][1],n));return t&&s.push(...q(e[o-1][0],e[o-1][1],e[0][0],e[0][1],n)),{type:"path",ops:s}}return o===2?M(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function J(e,t,n,o,s){return function(h,c){return A(h,!0,c)}([[e,t],[e+n,t],[e+n,t+o],[e,t+o]],s)}function O(e,t,n,o,s){return function(h,c,i,r){const[y,g]=T(r.increment,h,c,r.rx,r.ry,1,r.increment*I(.1,I(.4,1,i),i),i);let _=E(y,null,i);if(!i.disableMultiStroke){const[d]=T(r.increment,h,c,r.rx,r.ry,1.5,0,i),u=E(d,null,i);_=_.concat(u)}return{estimatedPoints:g,opset:{type:"path",ops:_}}}(e,t,s,function(h,c,i){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(h/2,2)+Math.pow(c/2,2))/2)),y=Math.max(i.curveStepCount,i.curveStepCount/Math.sqrt(200)*r),g=2*Math.PI/y;let _=Math.abs(h/2),d=Math.abs(c/2);const u=1-i.curveFitting;return _+=w(_*u,i),d+=w(d*u,i),{increment:g,rx:_,ry:d}}(n,o,s)).opset}function N(e){return e.randomizer||(e.randomizer=new F(e.seed||0)),e.randomizer.next()}function I(e,t,n,o=1){return n.roughness*o*(N(n)*(t-e)+e)}function w(e,t,n=1){return I(-e,e,t,n)}function q(e,t,n,o,s,h=!1){const c=h?s.disableMultiStrokeFill:s.disableMultiStroke,i=$(e,t,n,o,s,!0,!1);if(c)return i;const r=$(e,t,n,o,s,!0,!0);return i.concat(r)}function $(e,t,n,o,s,h,c){const i=Math.pow(e-n,2)+Math.pow(t-o,2),r=Math.sqrt(i);let y=1;y=r<200?1:r>500?.4:-.0016668*r+1.233334;let g=s.maxRandomnessOffset||0;g*g*100>i&&(g=r/10);const _=g/2,d=.2+.2*N(s);let u=s.bowing*s.maxRandomnessOffset*(o-t)/200,a=s.bowing*s.maxRandomnessOffset*(e-n)/200;u=w(u,s,y),a=w(a,s,y);const l=[],p=()=>w(_,s,y),f=()=>w(g,s,y);return c?l.push({op:"move",data:[e+p(),t+p()]}):l.push({op:"move",data:[e+w(g,s,y),t+w(g,s,y)]}),c?l.push({op:"bcurveTo",data:[u+e+(n-e)*d+p(),a+t+(o-t)*d+p(),u+e+2*(n-e)*d+p(),a+t+2*(o-t)*d+p(),n+p(),o+p()]}):l.push({op:"bcurveTo",data:[u+e+(n-e)*d+f(),a+t+(o-t)*d+f(),u+e+2*(n-e)*d+f(),a+t+2*(o-t)*d+f(),n+f(),o+f()]}),l}function E(e,t,n){const o=e.length,s=[];if(o>3){const h=[],c=1-n.curveTightness;s.push({op:"move",data:[e[1][0],e[1][1]]});for(let i=1;i+2<o;i++){const r=e[i];h[0]=[r[0],r[1]],h[1]=[r[0]+(c*e[i+1][0]-c*e[i-1][0])/6,r[1]+(c*e[i+1][1]-c*e[i-1][1])/6],h[2]=[e[i+1][0]+(c*e[i][0]-c*e[i+2][0])/6,e[i+1][1]+(c*e[i][1]-c*e[i+2][1])/6],h[3]=[e[i+1][0],e[i+1][1]],s.push({op:"bcurveTo",data:[h[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]]})}}else o===3?(s.push({op:"move",data:[e[1][0],e[1][1]]}),s.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):o===2&&s.push(...q(e[0][0],e[0][1],e[1][0],e[1][1],n));return s}function T(e,t,n,o,s,h,c,i){const r=[],y=[],g=w(.5,i)-Math.PI/2;y.push([w(h,i)+t+.9*o*Math.cos(g-e),w(h,i)+n+.9*s*Math.sin(g-e)]);for(let _=g;_<2*Math.PI+g-.01;_+=e){const d=[w(h,i)+t+o*Math.cos(_),w(h,i)+n+s*Math.sin(_)];r.push(d),y.push(d)}return y.push([w(h,i)+t+o*Math.cos(g+2*Math.PI+.5*c),w(h,i)+n+s*Math.sin(g+2*Math.PI+.5*c)]),y.push([w(h,i)+t+.98*o*Math.cos(g+c),w(h,i)+n+.98*s*Math.sin(g+c)]),y.push([w(h,i)+t+.9*o*Math.cos(g+.5*c),w(h,i)+n+.9*s*Math.sin(g+.5*c)]),[y,r]}function D(e,t){return{maxRandomnessOffset:2,roughness:e==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,combineNestedSvgPaths:!1,disableMultiStroke:e!=="double",disableMultiStrokeFill:!1,seed:t}}function B(e,t,n,o,s,h){const c=[];let i=n.strokeWidth||2;const r=function(u){const a=u.padding;if(a||a===0){if(typeof a=="number")return[a,a,a,a];if(Array.isArray(a)){const l=a;if(l.length)switch(l.length){case 4:return[...l];case 1:return[l[0],l[0],l[0],l[0]];case 2:return[...l,...l];case 3:return[...l,l[1]];default:return[l[0],l[1],l[2],l[3]]}}}return[5,5,5,5]}(n),y=n.animate===void 0||!!n.animate,g=n.iterations||2,_=n.rtl?1:0,d=D("single",h);switch(n.type){case"underline":{const u=t.y+t.h+r[2];for(let a=_;a<g+_;a++)a%2?c.push(M(t.x+t.w,u,t.x,u,d)):c.push(M(t.x,u,t.x+t.w,u,d));break}case"strike-through":{const u=t.y+t.h/2;for(let a=_;a<g+_;a++)a%2?c.push(M(t.x+t.w,u,t.x,u,d)):c.push(M(t.x,u,t.x+t.w,u,d));break}case"box":{const u=t.x-r[3],a=t.y-r[0],l=t.w+(r[1]+r[3]),p=t.h+(r[0]+r[2]);for(let f=0;f<g;f++)c.push(J(u,a,l,p,d));break}case"bracket":{const u=Array.isArray(n.brackets)?n.brackets:n.brackets?[n.brackets]:["right"],a=t.x-2*r[3],l=t.x+t.w+2*r[1],p=t.y-2*r[0],f=t.y+t.h+2*r[2];for(const b of u){let m;switch(b){case"bottom":m=[[a,t.y+t.h],[a,f],[l,f],[l,t.y+t.h]];break;case"top":m=[[a,t.y],[a,p],[l,p],[l,t.y]];break;case"left":m=[[t.x,p],[a,p],[a,f],[t.x,f]];break;case"right":m=[[t.x+t.w,p],[l,p],[l,f],[t.x+t.w,f]]}m&&c.push(A(m,!1,d))}break}case"crossed-off":{const u=t.x,a=t.y,l=u+t.w,p=a+t.h;for(let f=_;f<g+_;f++)f%2?c.push(M(l,p,u,a,d)):c.push(M(u,a,l,p,d));for(let f=_;f<g+_;f++)f%2?c.push(M(u,p,l,a,d)):c.push(M(l,a,u,p,d));break}case"circle":{const u=D("double",h),a=t.w+(r[1]+r[3]),l=t.h+(r[0]+r[2]),p=t.x-r[3]+a/2,f=t.y-r[0]+l/2,b=Math.floor(g/2),m=g-2*b;for(let k=0;k<b;k++)c.push(O(p,f,a,l,u));for(let k=0;k<m;k++)c.push(O(p,f,a,l,d));break}case"highlight":{const u=D("highlight",h);i=.95*t.h;const a=t.y+t.h/2;for(let l=_;l<g+_;l++)l%2?c.push(M(t.x+t.w,a,t.x,a,u)):c.push(M(t.x,a,t.x+t.w,a,u));break}}if(c.length){const u=function(b){const m=[];for(const k of b){let x="";for(const W of k.ops){const S=W.data;switch(W.op){case"move":x.trim()&&m.push(x.trim()),x=`M${S[0]} ${S[1]} `;break;case"bcurveTo":x+=`C${S[0]} ${S[1]}, ${S[2]} ${S[3]}, ${S[4]} ${S[5]} `;break;case"lineTo":x+=`L${S[0]} ${S[1]} `}}x.trim()&&m.push(x.trim())}return m}(c),a=[],l=[];let p=0;const f=(b,m,k)=>b.setAttribute(m,k);for(const b of u){const m=document.createElementNS(P,"path");if(f(m,"d",b),f(m,"fill","none"),f(m,"stroke",n.color||"currentColor"),f(m,"stroke-width",""+i),y){const k=m.getTotalLength();a.push(k),p+=k}e.appendChild(m),l.push(m)}if(y){let b=0;for(let m=0;m<l.length;m++){const k=l[m],x=a[m],W=p?s*(x/p):0,S=o+b,L=k.style;L.strokeDashoffset=""+x,L.strokeDasharray=""+x,L.animation=`rough-notation-dash ${W}ms ease-out ${S}ms forwards`,b+=W}}}}class G{constructor(t,n){this._state="unattached",this._resizing=!1,this._seed=Math.floor(Math.random()*2**31),this._lastSizes=[],this._animationDelay=0,this._resizeListener=()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))},this._e=t,this._config=JSON.parse(JSON.stringify(n)),this.attach()}get animate(){return this._config.animate}set animate(t){this._config.animate=t}get animationDuration(){return this._config.animationDuration}set animationDuration(t){this._config.animationDuration=t}get iterations(){return this._config.iterations}set iterations(t){this._config.iterations=t}get color(){return this._config.color}set color(t){this._config.color!==t&&(this._config.color=t,this.refresh())}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(t){this._config.strokeWidth!==t&&(this._config.strokeWidth=t,this.refresh())}get padding(){return this._config.padding}set padding(t){this._config.padding!==t&&(this._config.padding=t,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){(function(){if(!window.__rno_kf_s){const s=window.__rno_kf_s=document.createElement("style");s.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(s)}})();const t=this._svg=document.createElementNS(P,"svg");t.setAttribute("class","rough-annotation");const n=t.style;n.position="absolute",n.top="0",n.left="0",n.overflow="visible",n.pointerEvents="none",n.width="100px",n.height="100px";const o=this._config.type==="highlight";if(this._e.insertAdjacentElement(o?"beforebegin":"afterend",t),this._state="not-showing",o){const s=window.getComputedStyle(this._e).position;(!s||s==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(t=>{for(const n of t)n.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const t=this.rects();if(t.length!==this._lastSizes.length)return!0;for(let n=0;n<t.length;n++)if(!this.isSameRect(t[n],this._lastSizes[n]))return!0}return!1}isSameRect(t,n){const o=(s,h)=>Math.round(s)===Math.round(h);return o(t.x,n.x)&&o(t.y,n.y)&&o(t.w,n.w)&&o(t.h,n.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&this.render(this._svg,!1)}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}render(t,n){let o=this._config;n&&(o=JSON.parse(JSON.stringify(this._config)),o.animate=!1);const s=this.rects();let h=0;s.forEach(r=>h+=r.w);const c=o.animationDuration||800;let i=0;for(let r=0;r<s.length;r++){const y=c*(s[r].w/h);B(t,s[r],o,i+this._animationDelay,y,this._seed),i+=y}this._lastSizes=s,this._state="showing"}rects(){const t=[];if(this._svg)if(this._config.multiline){const n=this._e.getClientRects();for(let o=0;o<n.length;o++)t.push(this.svgRect(this._svg,n[o]))}else t.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return t}svgRect(t,n){const o=t.getBoundingClientRect(),s=n;return{x:(s.x||s.left)-(o.x||o.left),y:(s.y||s.top)-(o.y||o.top),w:s.width,h:s.height}}}function v(e,t){return new G(e,t)}function j(e){let t=0;for(const o of e){const s=o;s._animationDelay=t,t+=s.animationDuration===0?0:s.animationDuration||800}const n=[...e];return{show(){for(const o of n)o.show()},hide(){for(const o of n)o.hide()}}}const z="rgba(255, 147, 79, .35)",C="rgba(45, 49, 66, .2)",R="rgba(5, 142, 217, .35)",H=document.querySelector("#annotation1-intro"),K=document.querySelector("#annotation2-intro"),Q=document.querySelector("#annotation3-intro"),U=document.querySelector("#annotation1"),V=document.querySelector("#annotation2"),X=document.querySelector("#annotation3"),Y=document.querySelector("#annotation4"),Z=document.querySelector("#annotation5"),tt=document.querySelector("#annotation6"),et=document.querySelector("#annotation7"),nt=document.querySelector("#annotation8"),st=document.querySelector("#annotation9"),ot=document.querySelector("#annotation10"),it=document.querySelector("#annotation11"),at=document.querySelector("#annotation12"),rt=v(H,{type:"highlight",color:C,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),ht=v(K,{type:"highlight",color:z,strokeWidth:1,iterations:1,animate:!1}),ct=v(Q,{type:"highlight",color:R,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),lt=v(U,{type:"highlight",color:C,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),ut=v(V,{type:"highlight",color:z,strokeWidth:1,iterations:1,animate:!1}),ft=v(X,{type:"highlight",color:R,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),gt=v(Y,{type:"highlight",color:C,strokeWidth:1,iterations:1,animate:!1}),dt=v(Z,{type:"highlight",color:R,strokeWidth:1,iterations:1,animate:!1}),pt=v(tt,{type:"highlight",color:z,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),mt=v(et,{type:"highlight",color:C,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),_t=v(nt,{type:"highlight",color:R,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),yt=v(st,{type:"highlight",color:z,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),wt=v(ot,{type:"highlight",color:C,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),vt=v(it,{type:"highlight",color:R,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),kt=v(at,{type:"highlight",color:z,strokeWidth:1,iterations:1,animate:!1,multiline:!0}),bt=j([ft,lt,ut,gt,dt,pt,mt,_t,yt,wt,vt,kt,rt,ht,ct]);bt.show();
