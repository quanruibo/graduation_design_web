import{l as b,o as $,b as k,a as T}from"./datasets-index-DCIs3d3F.js";const E=[{Temperature:-5.33,Weather:0},{Temperature:-1.33,Weather:0},{Temperature:2,Weather:0},{Temperature:3.9,Weather:0},{Temperature:5.39,Weather:0},{Temperature:7.67,Weather:0},{Temperature:9.26,Weather:0},{Temperature:10.26,Weather:0},{Temperature:11.81,Weather:0},{Temperature:12.41,Weather:0},{Temperature:13.4,Weather:0},{Temperature:14.68,Weather:0},{Temperature:15.56,Weather:0},{Temperature:17.2,Weather:1},{Temperature:18.36,Weather:1},{Temperature:19.69,Weather:1},{Temperature:21.14,Weather:1},{Temperature:22.3,Weather:1},{Temperature:23.38,Weather:1},{Temperature:24.2,Weather:1},{Temperature:25.05,Weather:1},{Temperature:26.06,Weather:1},{Temperature:27.11,Weather:1},{Temperature:28.62,Weather:1},{Temperature:30,Weather:1},{Temperature:32.01,Weather:1},{Temperature:35.34,Weather:1}],i=500,l=300,t={top:20,right:40,bottom:50,left:70},v=["#003181","#ff9900"],S=["阴天","晴天"],s=b().domain([-10,40]).range([t.left,i-t.right]),r=b().domain([0,1]).range([l-t.bottom,t.top]),f=$().domain([0,1]).range(v),B=k().x(a=>s(a.x)).y(a=>r(a.y));function w(a,m,u,x=15,g=.5){const c=[];for(let o=a;o<=m;o+=u){const d=1/(1+Math.exp(-g*(o-x)));c.push({x:o,y:d})}return c}let y=-10,W=.5,h="阴天";function C(){T("#scatter-chart").selectAll("*").remove();const a=T("#scatter-chart").append("svg").attr("width",i).attr("height",l),m=a.selectAll(".x-tick").data(s.ticks()).enter().append("g").attr("transform",e=>`translate(${s(e)}, ${l-t.bottom})`);m.append("line").attr("class","grid-line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",-300+t.bottom+t.top),m.append("text").attr("class","axis-text").attr("y",15).attr("text-anchor","middle").attr("dy","5").text(e=>e);const u=a.selectAll(".y-tick").data(r.ticks()).enter().append("g").attr("transform",e=>`translate(${t.left}, ${r(e)})`);u.append("line").attr("class","grid-line").attr("x1",0).attr("x2",i-t.left-t.right).attr("y1",0).attr("y2",0),u.append("text").attr("class","axis-text").attr("text-anchor","end").attr("dx","-5").attr("dominant-baseline","middle").text(e=>e.toFixed(1)),a.append("line").attr("class","axis-line").attr("x1",t.left).attr("x2",i-t.right).attr("y1",l-t.bottom).attr("y2",l-t.bottom),a.append("line").attr("class","axis-line").attr("x1",t.left).attr("x2",t.left).attr("y1",l-t.bottom).attr("y2",t.top),a.selectAll(".scatter-circle").data(E).enter().append("circle").attr("class","scatter-circle").attr("r",5).attr("cx",e=>s(e.Temperature)).attr("cy",e=>r(e.Weather)).attr("fill",e=>f(e.Weather));const x=w(-10,40,.5);a.append("path").attr("class","sigmoid-line").attr("d",B(x)).attr("stroke-width",5);const g=a.append("g").append("circle").attr("class","example-circle").attr("r",13).attr("cx",s(y)).attr("cy",r(1/(1+Math.exp(-.5*(y-15))))).attr("fill",f(h==="阴天"?0:1)).attr("stroke","#fff").attr("stroke-width",3),c=a.append("g").attr("class","boundary-group").attr("transform",`translate(${t.left}, ${r(W)-5})`);c.append("rect").attr("class","boundary-line").attr("stroke","#333").attr("stroke-width",1.4).attr("fill","#fff").attr("width",i-t.right-t.left).attr("height",10),a.append("text").attr("class","axis-label").attr("text-anchor","middle").attr("transform",`translate(25,${r(.5)}) rotate(-90)`).text("概率"),a.append("text").attr("class","axis-label").attr("text-anchor","middle").attr("x",s(15)).attr("y",l-10).text("温度 (摄氏度)");const o=a.append("g").attr("transform",`translate(${t.left}, 10)`);S.forEach((e,n)=>{const p=o.append("g").attr("transform",`translate(${n*120} 0)`);p.append("circle").attr("class","legend-circle").attr("r",5).attr("fill",v[n]),p.append("text").attr("class","legend-text").attr("dominant-baseline","middle").attr("x",20).attr("font-size",16).text(e)});function d(){const e=+document.getElementById("tempSlider").value,n=+document.getElementById("boundarySlider").value;y=e,W=n;const p=1/(1+Math.exp(-.5*(e-15)));h=p>n?"晴天":"阴天",document.getElementById("temp-value").textContent=e,document.getElementById("boundary-value").textContent=n.toFixed(2),document.getElementById("prediction").textContent=h,g.attr("cx",s(e)).attr("cy",r(p)).attr("fill",f(h==="阴天"?0:1)),c.attr("transform",`translate(${t.left}, ${r(n)-5})`)}document.getElementById("tempSlider").addEventListener("input",d),document.getElementById("boundarySlider").addEventListener("input",d),d()}export{C as d};
